<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Read only filesystem size issues.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:peeweelinux%40adis.on.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000224.html">
   <LINK REL="Next"  HREF="000236.html">
<!-- Google_Analytics -->
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<!-- AdSense_Archive_Slot -->
   <H1>Read only filesystem size issues.
   </H1>
    <B>Adi Linden
    </B> 
    <A HREF="mailto:peeweelinux%40adis.on.ca"
       TITLE="Read only filesystem size issues.">peeweelinux@adis.on.ca
       </A><BR>
    <I>Sun, 10 Dec 2000 15:36:18 -0600 (CST)</I>
    <P><UL>
        <LI> Previous message: <A HREF="000224.html">Read only filesystem size issues.
</A></li>
        <LI> Next message: <A HREF="000236.html">Read only filesystem size issues.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#228">[ date ]</a>
              <a href="thread.html#228">[ thread ]</a>
              <a href="subject.html#228">[ subject ]</a>
              <a href="author.html#228">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Dean,

&gt;<i> 1) When calculating the size of the / filesystem, the /home and /root
</I>&gt;<i> directories are included. These directories are then separated out and
</I>&gt;<i> placed in the second partition. The size of the /home and /root
</I>&gt;<i> directories are not subtracted from the / filesystem. This overestimates
</I>&gt;<i> the size of the / filesystem by the size of the /home and /root
</I>&gt;<i> directories.
</I> 
I will look into that. I would think this applies to the 'Read-only root
fs with multiple ramdisks' target? This one was created on request and
hasn't been tested exhaustively by myself. Almost all my systems are
router type applications at the moment. So I usually use the uncompressed
ramdisk for development and the compressed ramdisk for production
purposes.

&gt;<i> 2) Partition sizes are calculated by using du -s -k command. This bases
</I>&gt;<i> file size on the cluster size of the development systems filesystem. In
</I>&gt;<i> my case this cluster size is 4K, while the cluster size of the flash
</I>&gt;<i> device is set to 1K. This also tends to overestimate the required size
</I>&gt;<i> of the flash device.
</I>&gt;<i> 
</I>&gt;<i> The result of these issues is that if your build is approaching the size
</I>&gt;<i> of your flash device, chances are very good that the pwl_target_load
</I>&gt;<i> functions will fail to load the device. In my case, an extracted 13
</I>&gt;<i> MByte filesystem fails to load on a 16 MByte compact flash because there
</I>&gt;<i> supposedly wasn't enough room.
</I>
This is odd. Are there differences between different 'du' incarnations? I
uderstood the -k switch is supposed to calculate filesystem size as
if the filesystem was  1024 byte block size. From the man page:

       --block-size=SIZE
              use SIZE-byte blocks

       -k, --kilobytes
              like --block-size=1024

Hmmm, I thought I tested that assumption. I think I will replace the 'du'
commands with a variable (if it's possible) so the command line parameters
can be adjusted on a script wide basis.

Thank you for pointing all this out!

TTYL,
Adi 

---------------------------------------------------
See the list archives at <A HREF="http://adis.on.ca/archives/">http://adis.on.ca/archives/</A>
See the PWL homepage at  <A HREF="http://peeweelinux.com">http://peeweelinux.com</A>
---------------------------------------------------

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000224.html">Read only filesystem size issues.
</A></li>
	<LI> Next message: <A HREF="000236.html">Read only filesystem size issues.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#228">[ date ]</a>
              <a href="thread.html#228">[ thread ]</a>
              <a href="subject.html#228">[ subject ]</a>
              <a href="author.html#228">[ author ]</a>
         </LI>
       </UL>
</body></html>
