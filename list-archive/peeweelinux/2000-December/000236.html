<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Read only filesystem size issues.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:peeweelinux%40adis.on.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000228.html">
   <LINK REL="Next"  HREF="000240.html">
<!-- Google_Analytics -->
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<!-- AdSense_Archive_Slot -->
   <H1>Read only filesystem size issues.
   </H1>
    <B>Dean Brown
    </B> 
    <A HREF="mailto:peeweelinux%40adis.on.ca"
       TITLE="Read only filesystem size issues.">peeweelinux@adis.on.ca
       </A><BR>
    <I>Mon, 11 Dec 2000 09:33:30 -0800</I>
    <P><UL>
        <LI> Previous message: <A HREF="000228.html">Read only filesystem size issues.
</A></li>
        <LI> Next message: <A HREF="000240.html">Read only filesystem size issues.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#236">[ date ]</a>
              <a href="thread.html#236">[ thread ]</a>
              <a href="subject.html#236">[ subject ]</a>
              <a href="author.html#236">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Adi Linden wrote:
&gt;<i> 
</I>&gt;<i> Hi Dean,
</I>&gt;<i> 
</I>&gt;<i> &gt; 1) When calculating the size of the / filesystem, the /home and /root
</I>&gt;<i> &gt; directories are included. These directories are then separated out and
</I>&gt;<i> &gt; placed in the second partition. The size of the /home and /root
</I>&gt;<i> &gt; directories are not subtracted from the / filesystem. This overestimates
</I>&gt;<i> &gt; the size of the / filesystem by the size of the /home and /root
</I>&gt;<i> &gt; directories.
</I>&gt;<i> 
</I>&gt;<i> I will look into that. I would think this applies to the 'Read-only root
</I>&gt;<i> fs with multiple ramdisks' target? This one was created on request and
</I>&gt;<i> hasn't been tested exhaustively by myself. Almost all my systems are
</I>&gt;<i> router type applications at the moment. So I usually use the uncompressed
</I>&gt;<i> ramdisk for development and the compressed ramdisk for production
</I>&gt;<i> purposes.
</I>
Yes this is a 'Read-only root fs with multiple ramdisks'. I believe I
said that in the portion you snipped.. ;^) If the devices that I am
trying to work on weren't so resource limited, I'd be tempted to use the
compressed ramdisk target.

&gt;<i> &gt; 2) Partition sizes are calculated by using du -s -k command. This bases
</I>&gt;<i> &gt; file size on the cluster size of the development systems filesystem. In
</I>&gt;<i> &gt; my case this cluster size is 4K, while the cluster size of the flash
</I>&gt;<i> &gt; device is set to 1K. This also tends to overestimate the required size
</I>&gt;<i> &gt; of the flash device.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The result of these issues is that if your build is approaching the size
</I>&gt;<i> &gt; of your flash device, chances are very good that the pwl_target_load
</I>&gt;<i> &gt; functions will fail to load the device. In my case, an extracted 13
</I>&gt;<i> &gt; MByte filesystem fails to load on a 16 MByte compact flash because there
</I>&gt;<i> &gt; supposedly wasn't enough room.
</I>&gt;<i> 
</I>&gt;<i> This is odd. Are there differences between different 'du' incarnations? I
</I>&gt;<i> uderstood the -k switch is supposed to calculate filesystem size as
</I>&gt;<i> if the filesystem was  1024 byte block size. From the man page:
</I>&gt;<i> 
</I>&gt;<i>        --block-size=SIZE
</I>&gt;<i>               use SIZE-byte blocks
</I>&gt;<i> 
</I>&gt;<i>        -k, --kilobytes
</I>&gt;<i>               like --block-size=1024
</I>
I read that documentation to mean that the -k option reported the size
of files as nnnK where K=1024. Try a du -b at a shell, this reports
sizes in bytes. What I see is all files being reported in multiples of
the cluster size of the fs.
 
&gt;<i> Hmmm, I thought I tested that assumption. I think I will replace the 'du'
</I>&gt;<i> commands with a variable (if it's possible) so the command line parameters
</I>&gt;<i> can be adjusted on a script wide basis.
</I>&gt;<i> 
</I>&gt;<i> Thank you for pointing all this out!
</I>
Not a problem. I appreciate the fact that PWL is available. I will be
feeding some more comments as time permits.
-- 
Dean Brown
---------------------------------------------------
See the list archives at <A HREF="http://adis.on.ca/archives/">http://adis.on.ca/archives/</A>
See the PWL homepage at  <A HREF="http://peeweelinux.com">http://peeweelinux.com</A>
---------------------------------------------------

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000228.html">Read only filesystem size issues.
</A></li>
	<LI> Next message: <A HREF="000240.html">Read only filesystem size issues.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#236">[ date ]</a>
              <a href="thread.html#236">[ thread ]</a>
              <a href="subject.html#236">[ subject ]</a>
              <a href="author.html#236">[ author ]</a>
         </LI>
       </UL>
</body></html>
