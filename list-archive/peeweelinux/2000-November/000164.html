<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> Silent booting
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:peeweelinux%40adis.on.ca">
   <META NAME="robots" CONTENT="index,nofollow">
   
   <LINK REL="Previous"  HREF="000170.html">
   <LINK REL="Next"  HREF="000165.html">
<!-- Google_Analytics -->
 </HEAD>
 <BODY BGCOLOR="#ffffff">
<!-- AdSense_Archive_Slot -->
   <H1>Silent booting
   </H1>
    <B>Dean Brown
    </B> 
    <A HREF="mailto:peeweelinux%40adis.on.ca"
       TITLE="Silent booting">peeweelinux@adis.on.ca
       </A><BR>
    <I>Fri, 10 Nov 2000 14:01:53 -0800</I>
    <P><UL>
        <LI> Previous message: <A HREF="000170.html">experiences with PWL0.53.10 (some problems?)
</A></li>
        <LI> Next message: <A HREF="000165.html">Silent booting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#164">[ date ]</a>
              <a href="thread.html#164">[ thread ]</a>
              <a href="subject.html#164">[ subject ]</a>
              <a href="author.html#164">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Adi Linden wrote:
&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I have a box here with the National Semi chipset which uses the pci-scan
</I>&gt;<i> module as well. Here are the pci-scan modules in the kernel rpms:
</I>&gt;<i> 
</I>&gt;<i> [<A HREF="mailto:root@big">root@big</A> Embedded_Build]# rpm -qpl RPMS/kernel-full-2.2.17-6.i386.rpm |
</I>&gt;<i> grep pci-scan
</I>&gt;<i> /lib/modules/2.2.17-full/net/pci-scan.o
</I>&gt;<i> 
</I>&gt;<i> [<A HREF="mailto:root@big">root@big</A> Embedded_Build]# rpm -qpl RPMS/kernel-basic-2.2.17-6.i386.rpm |
</I>&gt;<i> grep pci-scan
</I>&gt;<i> /lib/modules/2.2.17/net/pci-scan.o
</I>&gt;<i> 
</I>&gt;<i> I tried the natsemi.o module and I did have to do:
</I>&gt;<i> 
</I>&gt;<i>    insmod pci-scan
</I>&gt;<i>    insmod natsemi
</I>&gt;<i> 
</I>&gt;<i> This worked just fine. Trying to load natsemi without the pci-scan driver
</I>&gt;<i> resulted in the same errors you reported.
</I>
This is now working. Thanks!
 
&gt;<i> I am just working on a fresh compile of the kernel rpms. I intend to add
</I>&gt;<i> the devfs patch and daemon for 2.2.17. This should allow for an easier way
</I>&gt;<i> to build a read-only rootfs plus save considerable space.
</I>
I notice that the framebuffer support is no longer enabled in the
2.2.17-basic kernel, but is in the 2.2.17-full. Is this intentional?
 
&gt;<i> I am considering removing the netdriver patch which adds the new network
</I>&gt;<i> drivers requiring pci-scan and creating it as a seperate package (similar
</I>&gt;<i> to emlog and the rl2 driver). That way the default kernel(s) included with
</I>&gt;<i> PeeWeeLinux wouldn't require pci-scan to be loaded.
</I>&gt;<i> 
</I>&gt;<i> As far as the lilo prompt, no, there is currently no way to add additional
</I>&gt;<i> lilo paramters using pwlconfig. Looking at pwlconfig, I think it should be
</I>&gt;<i> possible to add a couple of parameters like:
</I>&gt;<i> 
</I>&gt;<i> Ramdisk File Name: &quot;ramdisk&quot;
</I>&gt;<i> Initrd File Name: &quot;initrd&quot;
</I>&gt;<i> --- Boot loader options ---
</I>&gt;<i> Boot Label: &quot;linux&quot;
</I>&gt;<i> Boot Prompt Timeout: &quot;0&quot;
</I>&gt;<i> VGA Mode: &quot;normal&quot;
</I>&gt;<i> Boot Option 1:
</I>&gt;<i> Boot Option 2:
</I>&gt;<i> --- floppy ---
</I>&gt;<i> 
</I>&gt;<i> The Boot Option 1|2 would allow for custom options to be enterred. I'll
</I>&gt;<i> play with that and release an updated peeweelinux-*-cfg.tar.gz package if
</I>&gt;<i> it works (and doesn't break any previous configurations).
</I>
This would work, but it would be nice to be able to include an external
file in the lilo.conf file. This might be difficult to do cleanly
however. On that note, where is the lilo.conf file stored at that is
actually used to install lilo onto the CF device? I'm using the read
only root filesystem as a target.


&gt;<i> TTYL,
</I>&gt;<i> Adi
</I>&gt;<i> 
</I>&gt;<i> On Thu, 9 Nov 2000, Dean Brown wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Ok,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Several problems here. First off, there is no pci-scan.o module anywhere
</I>&gt;<i> &gt; in the pwl distribution that I've been able to find. Searching the
</I>&gt;<i> &gt; available packages for pci-scan or pci-scan.o or pci-scan* returns a not
</I>&gt;<i> &gt; found.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Searching the filesystem rooted at the Embedded_Builds directory found a
</I>&gt;<i> &gt; pci-scan.{c|h|o} in the ./src/BUILDS/2.2.17/net path. Copying the .o
</I>&gt;<i> &gt; file to the /lib/modules/2.2.17/net/ directory and modifying the
</I>&gt;<i> &gt; /etc/rc.modules file to load the pci-scan module results in an error at
</I>&gt;<i> &gt; boot time of &quot;/lib/modules/2.2.17/net/pci-scan.o: couldn't find the
</I>&gt;<i> &gt; kernel version the module was compiled for&quot;.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I am using the 2.2.17 kernel.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On another note, entering linux debug=0 at the lilo prompt does indeed
</I>&gt;<i> &gt; suppress all the kernel spew. Is there any way to add additional
</I>&gt;<i> &gt; parameters to the lilo.conf created during the load process without
</I>&gt;<i> &gt; requiring lilo to be manually installed?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks again for you help.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Adi Linden wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Hi,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Some of the network modules require a pci driver to be installed. The
</I>&gt;<i> &gt; &gt; module to load prior to the rtl8139, tulip, natsemi or via-rhine driver is
</I>&gt;<i> &gt; &gt; pci-scan. Now, that module was supposed to be loaded automatically when
</I>&gt;<i> &gt; &gt; one of those network drivers is loaded.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Try doing
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; insmod pci-scan
</I>&gt;<i> &gt; &gt; insmod rtl8139
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I'll dig up the email with the silent.patch instructions and forward it to
</I>&gt;<i> &gt; &gt; you.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; This got me thinking about the kernel compile process... maybe I'll make
</I>&gt;<i> &gt; &gt; the updated network drivers and option (independend package) rather than a
</I>&gt;<i> &gt; &gt; kernel patch...
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; TTYL,
</I>&gt;<i> &gt; &gt; Adi
</I>&gt;<i> 
</I>&gt;<i> ---------------------------------------------------
</I>&gt;<i> See the list archives at <A HREF="http://adis.on.ca/archives/">http://adis.on.ca/archives/</A>
</I>&gt;<i> See the PWL homepage at  <A HREF="http://peeweelinux.com">http://peeweelinux.com</A>
</I>&gt;<i> ---------------------------------------------------
</I>
-- 
Dean Brown
---------------------------------------------------
See the list archives at <A HREF="http://adis.on.ca/archives/">http://adis.on.ca/archives/</A>
See the PWL homepage at  <A HREF="http://peeweelinux.com">http://peeweelinux.com</A>
---------------------------------------------------

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000170.html">experiences with PWL0.53.10 (some problems?)
</A></li>
	<LI> Next message: <A HREF="000165.html">Silent booting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#164">[ date ]</a>
              <a href="thread.html#164">[ thread ]</a>
              <a href="subject.html#164">[ subject ]</a>
              <a href="author.html#164">[ author ]</a>
         </LI>
       </UL>
</body></html>
